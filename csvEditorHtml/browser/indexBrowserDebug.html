<!DOCTYPE html>
<html lang="en">

<head>
	<title>Edit CSV</title>
	<meta charset="UTF-8">
	<meta name="description" content="Edit CSV files online with a table ui">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- common -->
	<!-- <link rel="icon" type="image/svg+xml" href="imgs/favicon-svg.svg" sizes="any"> -->
	<link rel="icon" href="imgs//favicon-32.png" sizes="32x32">
	<link rel="icon" href="imgs//favicon-48.png" sizes="48x48"> <!-- google search -->
	<link rel="icon" href="imgs/favicon-96.png" sizes="96x96">
	<link rel="icon" href="imgs/favicon-128.png" sizes="128x128">
	<link rel="icon" href="imgs/favicon-192.png" sizes="192x192">

	<!-- android -->
	<link rel="shortcut icon" sizes="196x196" href="imgs/favicon-196.png">

	<!-- iOS -->
	<link rel="apple-touch-icon-precomposed" sizes="180x180" href="/apple-touch-icon.png">

	<link rel="stylesheet" href="./cookies.css">
	<link rel="stylesheet" href="../../thirdParty/handsontable/handsontable.min.css">

	<!-- deploy adds hash but in fontawesome css file the file name is unchanged...-->
	<!-- <link rel="preload" as="font" href="../../thirdParty/fortawesome/fontawesome-free/webfonts/fa-solid-900.woff2"
		data-path-keep-depth="1" crossorigin>
	<link rel="preload" as="font" href="../../thirdParty/fortawesome/fontawesome-free/webfonts/fa-regular-400.woff2"
		data-path-keep-depth="1" crossorigin> -->

	<!-- not working for fire fox...-->
	<!-- <link rel="preload" href="../../thirdParty/fortawesome/fontawesome-free/css/all.min.css" as="style"
		onload="this.onload=null;this.rel='stylesheet'">
	<noscript>
		<link rel="stylesheet" href="../../thirdParty/fortawesome/fontawesome-free/css/all.min.css">
	</noscript> -->
	<link rel="stylesheet" href="../../thirdParty/fortawesome/fontawesome-free/css/all.min.css">

	<!-- copy from node_modules -->
	<link rel="preload" href="./third-party/sweetalert2/sweetalert2.min.css" as="style"
		onload="this.onload=null;this.rel='stylesheet'">
	<noscript><link rel="stylesheet" href="./third-party/sweetalert2/sweetalert2.min.css"></noscript>

	<link id="sweetalert2-dark-theme-link" rel="stylesheet" href="./third-party/sweetalert2-themes/dark.min.css">

	<link rel="preload" href="../../node_modules/toaster-js/default.css" as="style"
		onload="this.onload=null;this.rel='stylesheet'">
	<noscript><link rel="stylesheet" href="../../node_modules/toaster-js/default.css"></noscript>
	<!-- end copy from node_modules -->

	<link rel="stylesheet" href="../main.css">
	<link rel="stylesheet" href="../dark.css">
	<link rel="stylesheet" href="../light.css">
	<link rel="stylesheet" href="../high_contrast.css">
	<link rel="stylesheet" href="../settingsOverwrite.css">
	<link rel="stylesheet" href="./browser.css">
	<script src="../out/browser/beforeDomLoadedBrowser.js"></script>
	<script src="../out/beforeDomLoaded.js"></script>

	<!-- <script>
		function gaOptout() {
			var gaProperty = 'UA-177525551-1';
			var disableStr = 'ga-disable-' + gaProperty;
			document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
			window[disableStr] = true;
			console.log(document.cookie);
		}
	</script> -->
	<script src="../out/browser/cookies.js"></script>
	
	<!-- <script>
		var gaProperty = 'UA-177525551-1';
		var disableStr = 'ga-disable-' + gaProperty;
		if (document.cookie.indexOf(disableStr + '=true') > -1) {
			window[disableStr] = true;
		}
		function gaOptout() {
			document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
			window[disableStr] = true;
		}
	</script>
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-177525551-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-177525551-1', { 'anonymize_ip': true });
	</script> -->
	

</head>

<body class="vscode-dark vs-code-settings-font-size browser">

	<div id="cookie-box-wrapper" class="cookie-box-wrapper">
		<div class="cookie-box">

			<div class="banner-content">
				<span> This Website uses Cookies <i class="fas fa-cookie-bite"></i> (Google Analytics).
					For more information see legal notice.</span>

				<div class="multi-buttons">
					<div id="toggleCookieDetails" class="as-button" style="margin-left: 1rem;" onclick="toggleDetails(true)">Show
						details</div>
					<div class="as-button" onclick="cookiesOk()">Ok</div>
				</div>
			</div>
			<div class="details">
				We use cookies to personalize content and ads, to provide social media features and to analyse our traffic.
				We also share information about your use of our site with our social media, advertising and analytics partners
				who
				may combine it with other information that you've provided to them or that they've collected from your use of
				their services.

				<ul>
					<li>To analyse traffic we use Google Analytics, to opt-out click <a href="javascript:gaOptout();">here</a>
					</li>
				</ul>

			</div>
		</div>
	</div>

	<div id="find-widget" class="find-widget" style="display: none; right: 100px;">

		<div id="find-widget-progress-bar" class="progress-bar"></div>

		<div class="gripper" onmousedown="findWidgetInstance.onFindWidgetGripperMouseDown(event)">
			<i class="fas fa-grip-vertical"></i>
		</div>

		<div class="search-input-wrapper">
			<vscode-text-field id="find-widget-input" placeholder="Find..." class="input" title="Enter to start search">
			<span slot="end" style="width: 81px">
					<!-- search options -->
				<div class="flexed find-options">
					<vscode-button appearance="icon" id="find-window-option-match-case" class="btn option" onclick="findWidgetInstance.toggleFindWindowOptionMatchCase()" title="Match case">
						<span>Aa</span>
					</vscode-button>

					<vscode-button appearance="icon" id="find-window-option-whole-cell" class="btn option" onclick="findWidgetInstance.toggleFindWindowOptionWholeCell()" title="Match whole cell value">
						<span>Abl</span>
					</vscode-button>

					<vscode-button appearance="icon" id="find-window-option-whole-cell-trimmed" class="btn option" onclick="findWidgetInstance.toggleFindWindowOptionMatchTrimmedCell()" title="Trims the cell value before comparing">
						<span>A</span>
					</vscode-button>

					<vscode-button appearance="icon" id="find-window-option-regex" class="btn option" onclick="findWidgetInstance.toggleFindWindowOptionRegex()" title="Use regular expression">
						<span>
							<i class="fas fa-square-full"></i>
							<i class="fas fa-asterisk"></i>
						</span>
					</vscode-button>
				</div>
			
			</span>
			</vscode-text-field>


			<div id="find-widget-error-message" class="error-message">
			</div>
		</div>

		<div class="info">
			<vscode-button appearance="icon" id="find-widget-start-search" class="clickable" style="margin-right: 3px;" onclick="findWidgetInstance.refreshCurrentSearch()"
				title="Start search (Enter)">
				<i class="fas fa-search"></i>
			</vscode-button>
			<span id="find-widget-info">0/0</span>
			<span id="find-widget-cancel-search" title="Cancel search (Escape)" class="clickable" onclick="findWidgetInstance.onCancelSearch()" style="display: none;">
				<i class="fas fa-hand-paper"></i>
			</span>
			<span id="find-widget-outdated-search" class="outdated-search clickable" style="display: none;" onclick="findWidgetInstance.refreshCurrentSearch()"
				title="The table has changed, thus the search is outdated. Click to refresh the search.">
				<i class="fas fa-exclamation-triangle"></i>
			</span>
		</div>	

		<!-- search navigation buttons-->
		<div class="find-navigation-actions">

			<vscode-button appearance="icon" id="find-widget-previous" class="clickable" onclick="findWidgetInstance.gotoPreviousFindMatch()" title="Previous match (â‡§F3)">
				<span>
					<i class="fas fa-chevron-up"></i>
				</span>
			</vscode-button>
	
			<vscode-button appearance="icon" id="find-widget-next"  class="clickable" onclick="findWidgetInstance.gotoNextFindMatch()" title="Next match (F3)">
				<span>
					<i class="fas fa-chevron-down"></i>
				</span>
			</vscode-button>
	
			<vscode-button appearance="icon" class="clickable"  onclick="findWidgetInstance.showOrHideWidget(false)" title="Close (Escape)">
				<span>
					<i class="fas fa-times"></i>
				</span>
			</vscode-button>

		</div>

	</div>

	<div id="site-header-bar">

		<div>
			<!-- LOGO -->
			<span>Edit CSV</span>
		</div>

		<div class="right-area ">

			<div class="clickable" style="margin-right: 1rem;" onclick="toggleTheme()">
				<i class="fas fa-adjust"></i>
				<span>Toggle Theme</span>
				<!-- <i class="far fa-moon"></i>
				<i class="far fa-sun"></i> -->
			</div>

			<div id="version-n-changelog" style="margin-right: 1rem;">
				<a href="https://github.com/janisdd/vscode-edit-csv/blob/master/csvEditorHtml/browser/CHANGELOG.md" target="_blank">
					v1.7.1
				</a>
			</div>

			<div style="margin-right: 1rem;">
				<a href="./legalNotice.html" target="_blank">
					Legal Notice
				</a>
			</div>

			<div style="margin-right: 1rem;">
				<a href="./privacy.html" target="_blank">
					Privacy Policy
				</a>
			</div>

			<div>
				<a href="https://github.com/janisdd/vscode-edit-csv" target="_blank">
					<span>Sources</span>
					<img src="imgs/GitHub-Mark-32px.png" alt="Github logo" style="height: 21px; vertical-align: middle;">
				</a>
			</div>
		</div>
	</div>

	<div class="page full-h">

		<div class="all-options">

			<table>
				<thead>
					<tr>
						<th>
							<div class="options-title clickable" onclick="toggleOptionsBar()">
								<span>
									<i id="options-bar-icon" class="fas fa-chevron-right"></i> Read options
								</span>
							</div>
						</th>
						<th>
							<div class="options-title clickable" onclick="toggleOptionsBar()">
								Write options
							</div>
						</th>
						<th style="width: 100%;">
							<div class="options-title">
								<span class="clickable" onclick="toggleOptionsBar()">Preview</span>

									<vscode-button appearance="icon" class="mar-left-half clickable" onclick="generateCsvPreview()" title="Refresh the preview">
									<span>
										<i class="fas fa-redo-alt"></i>
									</span>
									</vscode-button>
			
									<!-- no css tooltip because we want a delay-->
									<vscode-button appearance="icon" id="preview-copy-icon" class="mar-left-half clickable" onclick="copyPreviewToClipboard()" title="Creates the preview and copies it to the clipboard">
										<span>
											<i class="fas fa-paste"></i>
										</span>
									</vscode-button>
			
									<vscode-button appearance="icon" id="re-render-table-icon" class="mar-left-half clickable" onclick="reRenderTable()" style="margin-left: 2em;" title="Redraws the table. This can fix some measuring issues (e.g. after the font size changed)">
										<span>
											<i class="fas fa-ruler-combined"></i>
										</span>
									</vscode-button>

									<vscode-button appearance="icon" id="force-column-resize-icon" class="mar-left-half clickable" onclick="forceResizeColumns()" style="margin-left: 0.5em;" title="Resizes all column widths to match their content">
										<span>
											<i class="fas fa-arrows-alt-h"></i>
										</span>
									</vscode-button>
									<vscode-button appearance="icon" id="force-row-resize-icon" class="mar-left-half clickable" onclick="forceAutoResizeRows()" style="margin-left: 0.5em;" title="Resizes all row heights to match their content">
										<span>
											<i class="fas fa-arrows-alt-v"></i>
										</span>
									</vscode-button>

									<vscode-button appearance="icon" id="reload-file" class="clickable" onclick="preReloadFileFromDisk()" style="margin-left: 2em;" title="Reload the csv file content (from disk)">
										<span>
											<i class="fas fa-sync-alt"></i>
										</span>
									</vscode-button>

								<!-- fixed rows top -->
								<div class="flexed changeable-indicator" style="margin-left: 2em;">
									<div>
										<vscode-button appearance="icon" id="fixed-rows-icon" class="clickable" title="Set fixed rows top" onclick="_toggleFixedRowsText()">
											<span>
												<i class="rotated-90deg fas fa-align-left"></i>
											</span>
										</vscode-button>
										<span id="fixed-rows-text" style="margin-left: 0.5rem;" class="dis-hidden">fixed rows:</span>
									</div>
									<div id="fixed-rows-top-info" class="text" style="margin-left: 0.5rem;">0</div>
									<div class="changeable" style="margin-left: 0.5rem;">
										<span class="clickable" onclick="incFixedRowsTop()"><i class="fas fa-chevron-up"></i></span>
										<span class="clickable" onclick="decFixedRowsTop()"><i class="fas fa-chevron-down"></i></span>
									</div>
								</div>
								<!-- fixed columns left -->
								<div class="flexed changeable-indicator" style="margin-left: 1em;">
									<div>
										<vscode-button appearance="icon" id="fixed-columns-icon" class="clickable" title="Set fixed columns left" onclick="_toggleFixedColumnsText()">
											<span>
												<i class="fas fa-align-left"></i>
											</span>
										</vscode-button>
										<span id="fixed-columns-text" style="margin-left: 0.5rem;" class="dis-hidden">fixed columns:</span>
									</div>
									<div id="fixed-columns-top-info" class="text" style="margin-left: 0.5rem;">0</div>
									<div class="changeable" style="margin-left: 0.5rem;">
										<span class="clickable" onclick="incFixedColsLeft()"><i class="fas fa-chevron-up"></i></span>
										<span class="clickable" onclick="decFixedColsLeft()"><i class="fas fa-chevron-down"></i></span>
									</div>
								</div>
								<!-- toggle readonly mode -->
								<div class="flexed toggle-btn clickable" style="margin-left: 1em;">
									<vscode-button appearance="icon" id="is-readonly-mode-toggle" onclick="toggleReadonlyMode()" title="Toggls the readonly table mode (SET IN CODE AT STARTUP)">
										<span>
											<i class="fas fa-pen"></i>
											<i class="fas fa-slash"></i>
											<i class="fas fa-slash"></i>
										</span>
									</vscode-button>
								</div>

								<!-- table temporary zoom -->
								<div class="flexed changeable-indicator" style="margin-left: 1em;">
									<div>
										<vscode-button appearance="icon" id="table-zoom-icon" class="clickable" title="Resets the table content zoom" onclick="resetTableContentZoom()">
											<span>
												<i class="fas fa-search-plus"></i>
											</span>
										</vscode-button>
									</div>
									<!-- <div id="table-zoom-info" class="text" style="margin-left: 0.5rem;">0</div> -->
									<div class="changeable" style="margin-left: 0.5rem;">
										<span class="clickable" onclick="incTableContentZoom()"><i class="fas fa-chevron-up"></i></span>
										<span class="clickable" onclick="decTableContentZoom()"><i class="fas fa-chevron-down"></i></span>
									</div>
								</div>

								<span class="clickable" style="margin-left: 2em;">
									<input id="csv-file-input" type="file" name="file" class="file-input" />
									<label for="csv-file-input"><i class="fas fa-upload"></i> Open a file or drop...</label>
								</span>

								<div id="source-file-unwatched-indicator" class="hoverable tooltip op-hidden is-tooltip-left is-tooltip-multiline" style="float: right;margin-right: 5px;"
									data-tooltip="The csv source file is not monitored for changes. Changes to the source file are ignored if the source file is changed by vs code or an external programme. To manually reload the contents of the source file, use the 'manual refresh button'.">
									<span>
										<i class="fas fa-eye"></i>
									</span>
								</div>
								<div id="unsaved-changes-indicator" class="hoverable unsaved-changes-indicator op-hidden tooltip is-tooltip-left" style="float: right;margin-right: 10px;"
									data-tooltip="You might have unsaved changes">
									<span>
										<i class="fas fa-save"></i>
									</span>
								</div>

							</div>
						</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>
							<div id="read-options-content" class="options-content on-readonly-disable-div">
								
									<div class="field same-line">
										<label>Encoding</label>
										<div class="select">
											<vscode-dropdown id="read-option-encoding" style="width: 11rem;">
												<vscode-option id="read-option-encoding-auto" value="auto">Auto detect</vscode-option>
												<!-- options will be auto inserted here -->
											</vscode-dropdown>
										</div>
									</div>

									<div class="field">
										<vscode-checkbox id="has-header" type="checkbox" name="has-header" class="" checked="checked" onchange="tryApplyHasHeader(true, false)">
											<span id="has-header-label">Has header</span>
										</vscode-checkbox>
										<span class="tooltip is-tooltip-right is-tooltip-multiline"
											data-tooltip="The first row is used as header. Note that changing this option will also change the write header option. It will also clear the undo/redo stack! If the table has only one row this cannot be applies immediately, it will be applied if the table has more than one row. [the readOption_hasHeader and tryToGuessHasHeader settings control this]">
											<i class="fas fa-question-circle"></i>
										</span>
									</div>

									<!-- this makes the row data invalid if we have more than 1 col-->
									<!-- <div class="field">
													<input id="skip-empty-lines" type="checkbox" name="skip-empty-lines" class="switch is-rounded" checked="checked" onchange="setSkipEmptyLines()" disabled>
													<label for="skip-empty-lines">
														<span>Skip empty lines</span>
														<span class="tooltip is-tooltip-multiline" data-tooltip="If enabled empty lines will be used as row. Disabled because empty rows are invalid if we have more than 1 column.">
																<i class="fas fa-question-circle"></i>
														</span>
													</label>
											</div> -->

									<!-- delimiter and comment -->
									<div class="flexed">
										<div class="field">
											<label>
												<span>Delimiter</span>
												<span class="clickable tooltip" data-tooltip="Set to tab character"
													onclick="setReadDelimiter('\t')">â‡¥</span>
												<span id="read-delimiter-tooltip" class="tooltip" data-tooltip="Empty to auto detect">
													<i class="fas fa-question-circle"></i>
												</span>
											</label>
											<!--<vscode-text-field id="delimiter-string" class="input" type="text" placeholder="auto" oninput="setDelimiterString()" />-->
											<input id="delimiter-string" class="input vscode-text-field" type="text" placeholder="auto" oninput="setDelimiterString()" />
										</div>

										<div class="field mar-left-half">
											<label>
												<span>Comment</span>
												<span class="tooltip is-tooltip-multiline"
													data-tooltip="Comments before and after csv data are preserved. Comments between data rows are ignored. Empty to treat every line as data (no comments).">
													<i class="fas fa-question-circle"></i>
												</span>
											</label>
											<!--<vscode-text-field id="comment-string" class="input" type="text" placeholder="Empty for no comments" oninput="setCommentString()" />-->
											<input id="comment-string" class="input vscode-text-field" type="text" placeholder="Empty for no comments" oninput="setCommentString()" />
										</div>
									</div>

									<!-- quote and escape -->
									<div class="flexed">
										<div class="field">
											<label>
												<span>QuoteChar</span>
											</label>
											<!--<vscode-text-field id="quote-char-string" class="input" type="text" oninput="setQuoteCharString()" onchange="setQuoteCharString()" /> -->
											<input id="quote-char-string" class="input vscode-text-field" type="text" oninput="setQuoteCharString()" />
										</div>

										<div class="field mar-left-half">
											<label>
												<span>EscapeChar</span>
												<span class="tooltip is-tooltip-multiline"
													data-tooltip="The character used to escape the QuoteChar inside field values">
													<i class="fas fa-question-circle"></i>
												</span>
											</label>
											<!--<vscode-text-field id="escape-char-string" placeholder="Placeholder Text" class="input" type="text" oninput="setEscapeCharString()"/>-->
											<input id="escape-char-string" placeholder="Placeholder Text" class="input vscode-text-field" type="text" oninput="setEscapeCharString()" />
										</div>
									</div>

									<div>
										<vscode-button appearance="secondary" class="" style="height: 36px; margin-top: 1rem;" onclick="toggleAskReadAgainModal(true)">
											<span style="width: 14rem">Reset data and apply read options</span>

											<span slot="end" class="icon is-small">
												<span class="tooltip  mar-left-half is-tooltip-multiline is-tooltip-right"
													data-tooltip="The input file content was stored locally and is used as data. Thus this view is independent of the source file">
													<i class="fas fa-question-circle"></i>
												</span>
											</span>
										</vscode-button>
									</div>

							</div>
						</td>
						<td>
							<div id="write-options-content" class="options-content on-readonly-disable-div">

								<div class="field same-line">
									<label>Encoding</label>
									<div class="select">
										<vscode-dropdown id="write-option-encoding" style="width: 11rem;">
											<vscode-option value="auto">Same as read</vscode-option>
										</vscode-dropdown>
									</div>
								</div>

								<div class="field">
									<vscode-checkbox id="has-header-write" type="checkbox" name="has-header-write" class="" checked="checked" onchange="setHasHeaderWrite()">
										<span>Write header</span>
									</vscode-checkbox>
									<span class="tooltip is-tooltip-bottom" data-tooltip="Checked: writes the header row, unchecked: not">
										<i class="fas fa-question-circle"></i>
									</span>
								</div>

								<!-- delimiter and comment -->
								<div class="flexed">
									<div class="field">
										<label for="delimiter-string-write">
											<label>
												<span>Delimiter</span>
												<span class="clickable tooltip" data-tooltip="Set to tab character"
													onclick="setWriteDelimiter('\t')">â‡¥</span>
												<span class="tooltip" data-tooltip="Empty to use delimiter from read">
													<i class="fas fa-question-circle"></i>
												</span>
											</label>
										</label>
										<!--<vscode-text-field id="delimiter-string-write" class="input" type="text" placeholder="auto" oninput="setDelimiterStringWrite()" />-->
										<input id="delimiter-string-write" class="input vscode-text-field"" type="text" placeholder="auto" oninput="setDelimiterStringWrite()" />
									</div>

									<div class="field mar-left-half">
										<label for="comment-string-write">
											<label>
												<span>Comment</span>
												<span class="tooltip is-tooltip-multiline"
													data-tooltip="Empty for no comments. Comments before and after csv data are written if char is present. Empty to exclude comments.">
													<i class="fas fa-question-circle"></i>
												</span>
											</label>
										</label>
										<!--<vscode-text-field id="comment-string-write" class="input" type="text" placeholder="Empty for no comments" oninput="setCommentStringWrite()" />-->
										<input id="comment-string-write" class="input vscode-text-field"" type="text" placeholder="Empty for no comments" oninput="setCommentStringWrite()" />
									</div>
								</div>

								<!-- quote and escape -->
								<div class="flexed">
									<div class="field">
										<label>
											<span>QuoteChar</span>
										</label>
										<!--<vscode-text-field id="quote-char-string-write" class="input" type="text" oninput="setQuoteCharStringWrite()" />-->
										<input id="quote-char-string-write" class="input vscode-text-field" type="text" oninput="setQuoteCharStringWrite()" />
									</div>
			
									<div class="field mar-left-half">
										<label>
											<span>EscapeChar</span>
											<span class="tooltip is-tooltip-multiline"
												data-tooltip="The character used to escape the QuoteChar inside field values">
												<i class="fas fa-question-circle"></i>
											</span>
										</label>
										<!--<vscode-text-field id="escape-char-string-write" class="input" type="text" oninput="setEscapeCharStringWrite()" />-->
										<input id="escape-char-string-write" class="input vscode-text-field" type="text" oninput="setEscapeCharStringWrite()" />
									</div>
								</div>

								<div class="flexed">
									<div class="field">
										<vscode-checkbox id="quote-all-fields-write" type="checkbox" name="quote-all-fields-write" class="" checked="checked" onchange="setQuoteAllFieldsWrite()">
										<span>Quote all fields</span>
										</vscode-checkbox>
									</div>
								</div>

								<!-- see help modal why -->
								<div class="flexed">
									<div class="field same-line" title="End of line terminator">
										<label for="comment-string-write">EOL</label>
										<div class="select">
											<vscode-dropdown id="newline-select-write" onchange="setNewLineWrite()">
												<vscode-option id="newline-same-as-input-option" value="">Same as input</vscode-option>
												<vscode-option value="lf">Linux/Mac (LF)</vscode-option>
												<vscode-option value="crlf">Windows (CRLF)</vscode-option>
											</vscode-dropdown>
										</div>
									</div>
								</div>

							</div>
						</td>
						<td>
							<div id="preview-content" class="options-content">
								<vscode-text-area resize="vertical" id="csv-preview" style="display: block;" class="preview-csv-textarea" rows="11"></vscode-text-area>
							</div>
						</td>
					</tr>

				</tbody>
			</table>

		</div>

		<div class="table-action-buttons">

			<div class="separated-btns">

				<div class="side-panel-toggle-wrapper">
					<div id="left-panel-toggle" class="clickable" onclick="toggleSidePanel()">
						<i id="left-panel-toggle-icon-expand" class="fas fa-chevron-right left-panel-toggle-icon-expand"></i>
						<i class="fas fa-chevron-down left-panel-toggle-icon-collapse"></i>
					</div>
				</div>
				
				<vscode-button appearance="secondary" id="add-row-btn" class="on-readonly-disable-btn" onclick="addRow()">
					<span slot="start" class="icon is-small"><i class="fas fa-plus"></i></span>
					<span style="width: 4rem">Add row</span>
				</vscode-button>
				<div class="row-col-insert-btns">
				
					<vscode-button appearance="secondary" class="on-readonly-disable-btn" onclick="insertRowAbove()" title="Insert row above current row [ctrl+shift+alt+up, ctrl+shift+ins]">
						<i class="fas fas fa-caret-up "></i>
					</vscode-button>
					<vscode-button appearance="secondary" class="on-readonly-disable-btn" onclick="insertRowBelow() " title="Insert row below current row [ctrl+shift+alt+down, ctrl+ins]">
						<i class="fas fa-caret-down ad"></i>
					</vscode-button>
				</div>

				<vscode-button appearance="secondary" id="add-col-btn" class="on-readonly-disable-btn" onclick="addColumn()">
					<span slot="start" class="icon is-small"><i class="fas fa-plus"></i></span>
					<span style="width: 5rem">Add column</span>
				</vscode-button>
				<div class="row-col-insert-btns">
					<vscode-button appearance="secondary" class="on-readonly-disable-btn" onclick="insertColLeft()" title="Insert column left to current column [ctrl+shift+alt+left]">
						<i class="fas fas fa-caret-left"></i>
					</vscode-button>
					<vscode-button appearance="secondary" class="on-readonly-disable-btn" onclick="insertColRight()" title="Insert column right to current column [ctrl+shift+alt+right]">
						<i class="fas fa-caret-right"></i>
					</vscode-button>
				</div>

				<vscode-button appearance="secondary" id="btn-apply-changes-to-file-and-save" class="mar-left" onclick="downloadAsFile()">
					<span slot="start" class="icon is-small"><i class="fas fa-save"></i></span>
					<span style="width: 7rem;">Download file</span>

					<span slot="end" class="icon is-small">
						<span class="tooltip is-tooltip-multiline mar-left-half"
							data-tooltip="Downloads the current state of the table as csv file [ctrl+s/cmd+s]">
							<i class="fas fa-question-circle"></i>
						</span>
					</span>
				</vscode-button>

				<div id="status-info-wrapper">
					<div>
						<span id="status-info"></span>
					</div>
				</div>

				<div class="flexed">

					<div>
						<vscode-button appearance="secondary" id="show-comments-btn" style="margin-right: 1em; height: 100%" onclick="showOrHideAllComments(true)">
							<span slot="start" class="icon is-small"><i class="far fa-comments"></i></span>
							<span style="width: 7rem">Show comments</span>
						</vscode-button>
						<vscode-button appearance="secondary" id="hide-comments-btn" style="margin-right: 1em; height: 100%" onclick="showOrHideAllComments(false)">
							<span slot="start" class="icon is-small"><i class="fas fa-comments"></i></span>
							<span style="width: 7rem">Hide comments</span>

							<span slot="end" class="icon is-small">
								<span class="tooltip mar-left-half is-tooltip-multiline is-tooltip-left"
									data-tooltip="Hides rows starting with a comment. The row headers will display an indicator if a row above or below is hidden. Hidden rows are also exported!">
									<i class="fas fa-question-circle"></i>
								</span>
							</span>
							</vscode-button>
					</div>

					<div id="tools-menu-wrapper" class="btn-with-menu-wrapper">

						<vscode-button appearance="secondary" style="height: 100%;" class="on-readonly-disable-btn btn-with-menu" onclick="toggleToolMenu()">
							<span slot="start" class="icon is-small"><i class="fas fa-toolbox"></i></span>
							<span style="width: 2.8rem">Tools</span>
							<span slot="end" class="icon is-small"><i id="tools-menu-btn-icon" class="fas fa-chevron-down"></i></span>
						</vscode-button>

						<div class="menu" style="width: 10rem;">

							<div class="menu-item" onclick="trimAllCells()">
								<span slot="start" class="icon is-small"><i class="fas fa-hand-scissors"></i></span>
								<span style="width: 2rem">Trim</span>

								<span slot="end" class="icon is-small">
									<span class="tooltip mar-left-half is-tooltip-multiline is-tooltip-left"
										data-tooltip="Trims every cell (including header row) in the table (removes leading and trailing spaces, tabs, ...). This will clear undo/redo stack!">
										<i class="fas fa-question-circle"></i>
									</span>
								</span>
							</div>

							<div class="menu-item" onclick="transposeColumsAndRows()">
								<span slot="start" class="icon is-small"><i class="fas fa-retweet"></i></span>
								<span style="width: 2rem">Transpose</span>

								<span slot="end" class="icon is-small">
									<span class="tooltip mar-left-half is-tooltip-multiline is-tooltip-left"
										data-tooltip="Swaps columns and rows. This excludes the header row. Slow for large tables! This will clear undo/redo stack!">
										<i class="fas fa-question-circle"></i>
									</span>
								</span>
							</div>

						</div>
					</div>

					<vscode-button appearance="secondary" class="" onclick="toggleHelpModal(true)">
						<span slot="start" class="icon is-small"><i class="fas fa-question"></i></span>
						<span style="width: 2rem">Help</span>
					</vscode-button>
				</div>

			</div>
			<div id="received-csv-prog-bar-wrapper">
				<progress id="received-csv-prog-bar" class="progress is-info" value="50" max="100"></progress>
			</div>
		</div>

		<!-- main editor/grid area -->
		<div class="side-paneled">
			<div id="side-panel" class="side-panel">

				<div id="side-panel-inner">

					<div class="stat">
						<div>Numbers sum
							<span class="tooltip is-tooltip-right is-tooltip-multiline"
								data-tooltip="The sum of numbers in the selected cells (only connected cells). Only the first number of a cell is used. Arbitrary-precision is powered by big.js">
								<i class="far fa-question-circle"></i>
							</span>
						</div>
						<div id="stat-sum-of-numbers">000</div>
					</div>

					<div class="stat">
						<div>Selected cells
							<span class="tooltip is-tooltip-right" data-tooltip="The number of selected cells">
								<i class="far fa-question-circle"></i>
							</span>
						</div>
						<div id="stat-selected-cells-count">000</div>
					</div>

					<div class="sub-stat">
						<div>Not empty
							<span class="tooltip is-tooltip-right is-tooltip-multiline" data-tooltip="The selected cells count where the value is not empty (whitespace is counted as value)">
								<i class="far fa-question-circle"></i>
							</span>
						</div>
						<div id="stat-selected-not-empty-cells">000</div>
					</div>

					<div class="stat">
						<div>Selected rows
							<span class="tooltip is-tooltip-right" data-tooltip="The selected rows count">
								<i class="far fa-question-circle"></i>
							</span>
						</div>

						<div id="stat-selected-rows">000</div>
					</div>

					<div class="stat">
						<div>Selected cols
							<span class="tooltip is-tooltip-right" data-tooltip="The selected columns count">
								<i class="far fa-question-circle"></i>
							</span>
						</div>
						<div id="stat-selected-cols">000</div>
					</div>

					<div class="stat divider"></div>

					<div class="stat">
						<div>Rows count</div>
						<div id="stat-rows-count">000</div>
					</div>

					<div class="stat">
						<div>Cols count</div>
						<div id="stat-cols-count">000</div>
					</div>

					<div class="stat divider"></div>

					<div class="stat">
						<div>Numbers style
							<span class="tooltip is-tooltip-right is-tooltip-multiline" data-tooltip="The number style only applies for the stats, does not affect sorting! Change before selecting cells.">
								<i class="far fa-question-circle"></i>
							</span>
						</div>
						<div class="control" style="padding-left: 0;">
						<vscode-radio-group>
							<vscode-radio id="numbers-style-en">
								<span>en: 3.14</span>
								<span class="tooltip is-tooltip-right is-tooltip-multiline" data-tooltip="Decimal separator: '.' Thousand separator: a single whitespace or ','">
									<i class="far fa-question-circle"></i>
								</span>
							</vscode-radio>
							<vscode-radio  id="numbers-style-non-en">
								<span>non-en: 3,14</span>
								<span class="tooltip is-tooltip-right is-tooltip-multiline" data-tooltip="Decimal separator: ',' Thousand separator: a single whitespace or '.'">
									<i class="far fa-question-circle"></i>
								</span>
							</vscode-radio>
						</vscode-radio-group>
						</div>
					</div>

					<div class="stat divider"></div>
					
					<!-- some day an ad can be placed here -->
					<!-- <div>
						<div style="border: 1px solid black; height: 300px;">
							AD HERE
						</div>
					</div> -->
				</div>

				<!-- place this inside to collapse this with the sidebar -->
				<div id="side-panel-resize-handle"></div>
			</div>

			<!-- main editor/grid area -->
			<div id="csv-editor-wrapper" class="csv-editor-wrapper">
				<div id="csv-editor">No data present. Please <b>enable JavaScript</b> for this site</div>
			</div>

		</div>

	</div>

	<div id="help-modal" class="modal">
		<div class="modal-background" onclick="toggleHelpModal(false)"></div>
		<div class="modal-content">
			<div class="box">

				<h3 class="title is-3">Important Notes</h3>
				<div class="content">
					<ul>
						<li>Note that the default write encoding is <b>UTF-8!</b></li>
						<li>Empty lines are skipped!</li>
						<li>On initial load all rows are expanded so that all rows have equal length (number of cells (if
							necessary)) [might trigger change detection]</li>
						<li>The files are not uploaded to any server. They are only processed in the browser (thus the bad
							performance for large files)</li>
						<li><b>I found a bug, what should I do?</b> Please click on "Sources" which will get you to the github
							repository. There you can create an issue</li>
					</ul>
				</div>

				<h3 class="title is-3">Features/Shortcuts</h3>
				<div class="content">
					<ul>
						<li>Undo/Redo</li>
						<li>Click on column header text to sort</li>
						<li>Click left next to the row/column header text to select then drag to rearrange</li>
						<li>Resize row/column</li>
						<li>
							<div class="keys">Home</div> to move to the first cell in a row
						</li>
						<li>
							<div class="keys">End</div> to move to the last cell in a row
						</li>

						<li>
							<div class="keys">Ctrl</div>+<div class="keys">Home</div> to move to the first cell in a column
						</li>
						<li>
							<div class="keys">Ctrl</div>+<div class="keys">End</div> to move to the last cell in a column
						</li>
						<li>
							<div class="keys">Esc</div> to cancel editing and close cell editor
						</li>
						<li>
							<div class="keys">Ctrl</div>+<div class="keys">Enter</div> to add a line break in a cell
						</li>

						<li>To delete a row/column hover over it and click the trash-icon</li>

						<li>Double click on a column resize handle to fit content, double click on an auto sized column to set width
							to
							200px (good for very wide columns)</li>

					</ul>

					For a full list of shortcuts see <a target="_blank"
						href="https://handsontable.com/docs/6.2.2/tutorial-keyboard-navigation.html">https://handsontable.com/docs/6.2.2/tutorial-keyboard-navigation.html</a>
				</div>

				<h3 class="title is-3">Hints</h3>
				<div class="content">
					<ul>
					<!-- turns out handsontable checks if the values are isNaN and if both are numbers they are parsed as floats and compared as floats ... so comparing numbers or text should be fine here -->
						<li>Sorting is not automatically updated after data has changed</li>
						<li>Sorting state is exported</li>
						<li>Similar to Excel, you can hold down the <div class="keys">alt</div> key before releasing the mouse button to copy the cell values. No interpolation is carried out.</li>
						<li>You can use ctrl/cmd click on a column header to sort by multiple columns</li>
						<li>The unsaved changes indicator is display on any change (never cleared until you apply the changes, even if you revert manually)</li>
						<li>When you see the unsaved changes indicator right after the table was loaded then some rows were expanded (to ensure all rows have the same length)</li>
						<li>You can right-click on the table to get a context menu</li>
						<li>Hidden rows/columns are also exported</li>
						<li>Comment rows will export only the first cell/column. If you use a cell other than the first for comments the cell color will indicate this. </li>
						<li>If you edit an unnamed (csv) file and close it then the editor will be closed too (unsaved changes will
							be lost)!</li>
						<li>Copy & Past use tab (<div class="keys">â‡¥</div>) as separator (same as excel)</li>
						<li>If a row has more cell than the others empty cells are added to match the row with the highest cell
							count</li>
						<li>You can delete multiple rows/cols by selecting them via shift and right click then remove (or <div class="keys">Ctrl</div>+<div class="keys">Shift</div>+<div class="keys">Alt</div>+<div class="keys">Minus</div>)</li>
					</ul>
				</div>


			</div>
		</div>
		<button class="modal-close is-large clickable" aria-label="close" onclick="toggleHelpModal(false)">
			<i class="fas fa-times"></i>
		</button>
	</div>

	<div id="ask-read-again-modal" class="modal modal-centered">
		<div class="modal-background"></div>
		<div class="modal-content">
			<div class="box">
				<h3 class="title is-3">Reset data and apply read options</h3>

				<p>
					Are you sure that you want to overwrite the table with the initial content (snapshot) of the source file? <br />
					This will use the original data (when opening the CSV editor) and discard all changes applied to the table! <br />
					Please note that the content of the csv file will not be read or loaded again (a snapshot of the file was stored in memory when the csv editor was opened)!
				</p>

				<div style="margin-top: 1em">
					<vscode-button class="" onclick="resetDataFromResetDialog()">
						<span style="width: 3rem">Reset</span>
					</vscode-button>

					<vscode-button appearance="secondary" style="margin-left: 0.5em" class="" onclick="toggleAskReadAgainModal(false)">
						<span style="width: 3rem">Cancel</span>
					</vscode-button>
				</div>

			</div>
		</div>
		<button class="modal-close is-large clickable" aria-label="close" onclick="toggleAskReadAgainModal(false)">
			<i class="fas fa-times"></i>
		</button>
	</div>

	<div id="ask-reload-file-modal" class="modal modal-centered">
		<div class="modal-background"></div>
		<div class="modal-content">
			<div class="box">
				<h3 class="title is-3">Reload file content and discard changes</h3>

				<p>
					Are you sure you want to read the source file again?<br />
					All changes to the table will be discarded!<br />
					<br />
					<i>This also updates the snapshot of the file that is used for the 'reset data' function.</i>
				</p>

				<div style="margin-top: 1em">
					<vscode-button class="" onclick="reloadFileFromDisk()">
						<span style="width: 3rem">Reload</span>
					</vscode-button>

					<vscode-button appearance="secondary" style="margin-left: 0.5em" class="" onclick="toggleAskReloadFileModalDiv(false)">
						<span style="width: 3rem">Cancel</span>
					</vscode-button>
				</div>

			</div>
		</div>
		<button class="modal-close is-large clickable" aria-label="close" onclick="toggleAskReloadFileModalDiv(false)">
			<i class="fas fa-times"></i>
		</button>
	</div>

	<div id="source-file-changed-modal" class="modal modal-centered">
		<div class="modal-background"></div>
		<div class="modal-content">
			<div class="box">
				<h3 class="title is-3">Source file changed</h3>

				<p>
					The source file has been changed, so the table is no longer up-to-date.<br />
					You can reload the contents of the file, which will discard all changes to the table!<br />
					<br />
					Or you can ignore the changes.<br />
					<br />
					<i>This will also update the snapshot of the file that is used for the 'reset data' feature.</i>
				</p>

				<div style="margin-top: 1em">
					<vscode-button class="" onclick="reloadFileFromDisk()">
						<span style="width: 3rem">Reload</span>
					</vscode-button>

					<vscode-button appearance="secondary" style="margin-left: 0.5em" class="" onclick="toggleSourceFileChangedModalDiv(false, true)">
						<span style="width: 3rem">Ignore</span>
					</vscode-button>
				</div>

			</div>
		</div>
		<!-- user must choose -->
		<!--<button class="modal-close is-large clickable" aria-label="close" onclick="toggleSourceFileChangedModalDiv(false)">
			<i class="fas fa-times"></i>
		</button>-->
	</div>

	<div id="drop-file-overlay" class="op-hidden">
		<div id="drop-zone" class="">
			<div>
				<p><i class="fas fa-upload" style="margin-right: 1rem;"></i> Drop file to open</p>
			</div>
		</div>
	</div>


	<script type="module" src="../../node_modules/@vscode/webview-ui-toolkit/dist/toolkit.min.js"></script>
	<script src="../../node_modules/dayjs/dayjs.min.js"></script>
	<script src="../../node_modules/dayjs/plugin/customParseFormat.js"></script>
	<script src="../out/browser/afterDomLoadedBrowser.js"></script>
	<script src="../../thirdParty/handsontable/handsontable.js"></script>
	<script src="../../thirdParty/papaparse/papaparse.js"></script>
	<script src="../../thirdParty/mousetrap/mousetrap.js"></script>
	<script src="../../thirdParty/mousetrap/plugins/global-bind/mousetrap-global-bind.js"></script>


	<script src="./third-party/parcel-iconv-chardet.js"></script>
	<!-- copy from node_modules -->
	<script src="../../node_modules/toaster-js/umd.js"></script>
	<script src="./third-party/sweetalert2//sweetalert2.min.js"></script>
	<script src="./third-party/bulma-toast/bulma-toast.min.js"></script>
	<!-- end copy from node_modules -->
	<script src="../../thirdParty/big.js/big.min.js"></script>
	<script src="../../thirdParty/toFormat/toFormat.min.js"></script>
	<script src="../../thirdParty/regression/regression.min.js"></script>

	<script src="../out/progressbar.js"></script>
	<script src="../out/findWidget.js"></script>
	<script src="../out/io.js"></script>
	<script src="../out/autoFill.js"></script>
	<script src="../out/util.js"></script>
	<script src="../out/ui.js"></script>
	<script src="../out/main.js"></script>
	<script src="../out/browser/browser.js"></script>


</body>

</html>