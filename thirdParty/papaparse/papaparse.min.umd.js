(function(f,x){typeof exports=="object"&&typeof module<"u"?x(exports):typeof define=="function"&&define.amd?define(["exports"],x):(f=typeof globalThis<"u"?globalThis:f||self,x(f.papaparse={}))})(this,function(f){"use strict";/* @license
Papa Parse
v5.0.0-custom-2.0.0
https://github.com/mholt/PapaParse
License: MIT
commit: 49170b76b382317356c2f707e2e4191430b8d495
fork -> https://github.com/janisdd/PapaParse/tree/fix609_main
*/const x={delimiter:"",newline:"",comments:null,quoteChar:'"',retainQuoteInformation:!1,escapeChar:"",skipEmptyLines:!1,delimitersToGuess:[",","	","|",";","",""],maxDelimiterGuessLength:5e3,previewInRows:null,rowInsertCommentLines_commentsString:null,calcColumnIndexToCsvColumnIndexMapping:!1,calcLineIndexToCsvLineIndexMapping:!1,calcCsvFieldToInputPositionMapping:!1},F={delimiter:",",newline:`\r
`,quoteChar:'"',escapeChar:"",skipEmptyLines:!1,quotes:!1,quoteEmptyOrNullFields:!1,quoteLeadingSpace:!0,quoteTrailingSpace:!0,determineFieldHasQuotesFunc:void 0,rowInsertCommentLines_commentsString:null,calcCsvFieldToInputPositionMapping:!1},m=class m{static parse(e,i){const t={...x,...i};return new I(e,t).parse(e)}static unparse(e,i){const t={...F,...i};return new E(t).unparse(e)}};m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',"\uFEFF"],m.NEED_QUOTES_CHARS=["\r",`
`],m.DefaultDelimiter=",",m.DefaultQuoteChar='"',m.DefaultEscapeChar='"';let c=m;function S(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}class I{constructor(e,i){this.input=e;let t=i.newline;t||(t=this._guessLineEndings(e,i.quoteChar));const o=i.comments??"";this._delimiterError=!1;let r=i.delimiter;if(!i.delimiter){const s=i.skipEmptyLines==="greedy"||i.skipEmptyLines,h=this._guessDelimiter(e,t,s,o,i.delimitersToGuess);h.successful&&h.bestDelimiter?r=h.bestDelimiter:(this._delimiterError=!0,r=c.DefaultDelimiter)}this._effectiveConfig={...i,newline:t,previewInRows:i.previewInRows??0,comments:o,delimiter:r},this._effectiveConfig.previewInRows<0&&(this._effectiveConfig.previewInRows=0),this._isGreedySkipEmptyLines=this._effectiveConfig.skipEmptyLines==="greedy"}parse(e){const t=new R(this._effectiveConfig,!1).parse(e);return this._effectiveConfig.retainQuoteInformation||(t.meta.columnIsQuoted=null,t.meta.cellIsQuotedInfo=null),this._processResults(t,this._delimiterError),t}_processResults(e,i){if(e&&i&&this._addError(e,"Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),this._effectiveConfig.calcLineIndexToCsvLineIndexMapping){const t=[];let o=0,r=0;for(let s=0;s<e.data.length;s++){const h=e.data[s];for(let n=0;n<h.length;n++){const a=h[n].split(this._effectiveConfig.newline).length-1;for(let u=0;u<a;u++)t.push(o)}t.push(o),this._effectiveConfig.skipEmptyLines&&I._testEmptyLine(h,this._isGreedySkipEmptyLines)||(r=o,o++)}if(e.data.length>0&&this._effectiveConfig.skipEmptyLines){let s=t.length-1;for(let h=e.data.length-1;h>=0;h--){const n=e.data[h];if(I._testEmptyLine(n,this._isGreedySkipEmptyLines))t[s]=r,s--;else break}}e.meta.outLineIndexToCsvLineIndexMapping=t}if(this._effectiveConfig.skipEmptyLines){const t=e.data.map(o=>!I._testEmptyLine(o,this._isGreedySkipEmptyLines));e.data=e.data.filter((o,r)=>t[r]),e.meta.cellIsQuotedInfo&&(e.meta.cellIsQuotedInfo=e.meta.cellIsQuotedInfo.filter((o,r)=>t[r]))}}_guessDelimiter(e,i,t,o,r){let s=null,h=null,n=null;for(let l=0;l<r.length;l++){const a=r[l];let u=0,_=0,g=0,d=null;const p={...this._effectiveConfig,comments:o,delimiter:a,newline:i,previewInRows:10,calcColumnIndexToCsvColumnIndexMapping:!1,calcLineIndexToCsvLineIndexMapping:!1,calcCsvFieldToInputPositionMapping:!1,retainQuoteInformation:!1},w=new R(p,!0).parse(e);for(let L=0;L<w.data.length;L++){if(t&&I._testEmptyLine(w.data[L],this._isGreedySkipEmptyLines)){g++;continue}const q=w.data[L].length;if(_+=q,d===null){d=q;continue}else q>0&&(u+=Math.abs(q-d),d=q)}w.data.length>0&&(_/=w.data.length-g),(h===null||u<=h)&&(n===null||_>n)&&_>1.99&&(h=u,s=a,n=_)}return{successful:s!==null,bestDelimiter:s}}_guessLineEndings(e,i){e=e.substr(0,1024*1024);const t=new RegExp(S(i)+"([^]*?)"+S(i),"gm");e=e.replace(t,"");const o=e.split("\r"),r=e.split(`
`),s=r.length>1&&r[0].length<o[0].length;if(o.length===1||s)return`
`;let h=0;for(let n=0;n<o.length;n++)o[n][0]===`
`&&h++;return h>=o.length/2?`\r
`:"\r"}_addError(e,i,t,o,r){e.errors.push({type:i,code:t,message:o,row:r})}static _testEmptyLine(e,i){return i?e.join("").trim()==="":e.length===1&&(e[0]===null||e[0]===void 0||e[0].length===0)}}class R{constructor(e,i){if(this._currentRowFieldPositions=[],this._fieldStart=0,this._input="",this._inputLen=-1,this._config=e,this._quoteSearch=-1,this._nextNewline=-1,this._cursor=0,this._lastCursor=-1,this._data=[],this._row=[],this._errors=[],this._delim=e.delimiter,this._newlineString=e.newline,this._quoteChar=e.quoteChar,this._previewInRows=e.previewInRows,this._firstQuoteInformationRowFound=!1,this._currentRowStartIndex=0,this._isGuessingDelimiter=i,this._retainQuoteInformation=e.retainQuoteInformation,this._maxGuessLength=e.maxDelimiterGuessLength,this._comments=e.comments,this._rowInsertCommentLines_commentsString=e.rowInsertCommentLines_commentsString,this._columnIsQuoted=[],this._cellIsQuotedInfo=[],this._currSingleRowColumnIndexToCsvColumnIndexMapping=[],this._outColumnIndexToCsvColumnIndexMapping=e.calcColumnIndexToCsvColumnIndexMapping?[]:null,this._outFieldPositionMapping=e.calcCsvFieldToInputPositionMapping?[]:null,this._cellIsQuotedInfoRow=[],this._quoteChar||(this._quoteChar=c.DefaultQuoteChar),this._escapeChar=e.escapeChar?e.escapeChar:this._quoteChar,c.BAD_DELIMITERS.indexOf(this._delim)>-1&&(this._delim=c.DefaultDelimiter),this._comments===this._delim)throw new Error("Comment character same as delimiter");c.BAD_DELIMITERS.indexOf(this._comments)>-1&&(this._comments=""),this._newlineString!==`
`&&this._newlineString!=="\r"&&this._newlineString!==`\r
`&&(this._newlineString=`
`)}parse(e){this._input=e,this._inputLen=e.length;const i=this._config,t=i.delimiter.length,o=i.newline.length,r=i.comments.length;if(!e)return this.returnable();if(e.indexOf(this._quoteChar)===-1){const l=e.split(this._newlineString);let a="";for(let u=0;u<l.length;u++){const _=this._cursor;a=l[u];const g=this._rowInsertCommentLines_commentsString&&a.startsWith(this._rowInsertCommentLines_commentsString);let d=null;if(this._cursor+=a.length,u!==l.length-1&&(this._cursor+=this._newlineString.length),!(this._comments&&a.substr(0,r)===this._comments&&!g)){if(d=g?[a]:a.split(this._delim),this._retainQuoteInformation&&this._firstQuoteInformationRowFound===!1&&(this._columnIsQuoted=Array(d.length).fill(!1)),this._outColumnIndexToCsvColumnIndexMapping)if(g)this._currSingleRowColumnIndexToCsvColumnIndexMapping.push(a.length-1);else{let p=0;d.forEach((C,w)=>{w!==d.length-1?p+=C.length+t:p+=C.length,this._currSingleRowColumnIndexToCsvColumnIndexMapping.push(p-1)})}if(!this._isGuessingDelimiter&&this._outFieldPositionMapping){this._currentRowFieldPositions=[];let p=_;for(let C=0;C<d.length;C++)this._currentRowFieldPositions.push({start:p,end:p+d[C].length}),p+=d[C].length+t}if(this.pushRow(d),this._previewInRows>0&&this._previewInRows<=u)return this._data=this._data.slice(0,this._previewInRows),this.returnable()}}if(!this._isGuessingDelimiter&&this._retainQuoteInformation){this._cellIsQuotedInfo=Array(this._data.length);for(let u=0;u<this._data.length;u++){const _=this._data[u];this._cellIsQuotedInfo[u]=Array(_.length).fill(!1)}}return this.returnable()}let s=e.indexOf(this._delim,this._cursor);this._nextNewline=e.indexOf(this._newlineString,this._cursor);const h=new RegExp(S(this._escapeChar)+S(this._quoteChar),"g");this._quoteSearch=e.indexOf(this._quoteChar,this._cursor),this._columnIsQuoted=[],this._cellIsQuotedInfo=[],this._cellIsQuotedInfoRow=[];let n=-1;if(this._isGuessingDelimiter&&s===-1&&this._cursor===0)return this.finish("");for(;;){if(this._fieldStart=this._cursor,e[this._cursor]===this._quoteChar){for(this._quoteSearch=this._cursor,this._retainQuoteInformation&&(this._firstQuoteInformationRowFound===!1&&this._columnIsQuoted.push(!0),this._cellIsQuotedInfoRow.push(!0)),this._cursor++;;){if(this._quoteSearch=e.indexOf(this._quoteChar,this._quoteSearch+1),this._isGuessingDelimiter&&this._maxGuessLength&&this._quoteSearch>this._maxGuessLength)return this.finish("");if(this._quoteSearch===-1){this._errors.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:this._data.length,index:this._cursor});const _=this._nextNewline===-1?this._inputLen:this._nextNewline+1;return this.addFieldPosition(this._fieldStart,_),this._nextNewline===-1?this.addColumnIndexMapping(this._inputLen-1):this.addColumnIndexMapping(this._nextNewline-1),this.finish()}if(this._quoteSearch===this._inputLen-1){const _=e.substring(this._cursor,this._quoteSearch).replace(h,this._quoteChar),g=this._quoteSearch+1;return this.addFieldPosition(this._fieldStart,g),n=this._quoteSearch,this.addColumnIndexMapping(n),this.finish(_)}if(this._quoteChar===this._escapeChar&&e[this._quoteSearch+1]===this._escapeChar){this._quoteSearch++;continue}if(this._quoteChar!==this._escapeChar&&this._quoteSearch!==0&&e[this._quoteSearch-1]===this._escapeChar)continue;s!==-1&&s<this._quoteSearch+1&&(s=e.indexOf(this._delim,this._quoteSearch+1)),this._nextNewline!==-1&&this._nextNewline<this._quoteSearch+1&&(this._nextNewline=e.indexOf(this._newlineString,this._quoteSearch+1));const l=this._nextNewline===-1?s:Math.min(s,this._nextNewline),a=this.extraSpaces(l);if(e.substr(this._quoteSearch+1+a,t)===this._delim){n=this._quoteSearch+a+t,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n+1-t),this._row.push(e.substring(this._cursor,this._quoteSearch).replace(h,this._quoteChar)),this._cursor=this._quoteSearch+1+a+t,e[this._quoteSearch+1+a+t]!==this._quoteChar&&(this._quoteSearch=e.indexOf(this._quoteChar,this._cursor)),s=e.indexOf(this._delim,this._cursor),this._nextNewline=e.indexOf(this._newlineString,this._cursor);break}const u=this.extraSpaces(this._nextNewline);if(e.substr(this._quoteSearch+1+u,o)===this._newlineString){if(n=this._quoteSearch+u,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n+1),this._row.push(e.substring(this._cursor,this._quoteSearch).replace(h,this._quoteChar)),this.saveRow(this._quoteSearch+1+u+o),s=e.indexOf(this._delim,this._cursor),this._quoteSearch=e.indexOf(this._quoteChar,this._cursor),this._previewInRows>0&&this._data.length>=this._previewInRows)return this.returnable();break}this._errors.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:this._data.length,index:this._cursor}),this._quoteSearch++}continue}if(this._retainQuoteInformation&&this._cellIsQuotedInfoRow.push(!1),this._comments&&!this._rowInsertCommentLines_commentsString&&this._row.length===0&&e.substr(this._cursor,r)===this._comments){if(this._retainQuoteInformation&&(this._cellIsQuotedInfoRow=[]),this._nextNewline===-1)return this.returnable();this._cursor=this._nextNewline+o,this._nextNewline=e.indexOf(this._newlineString,this._cursor),s=e.indexOf(this._delim,this._cursor);continue}if(this._retainQuoteInformation&&this._firstQuoteInformationRowFound===!1&&this._columnIsQuoted.push(!1),this._row.length===0&&this._rowInsertCommentLines_commentsString&&e.substr(this._cursor,this._rowInsertCommentLines_commentsString.length)===this._rowInsertCommentLines_commentsString){if(this._nextNewline===-1)return n=e.length,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n),this._row.push(e.substring(this._cursor)),this.pushRow(this._row),this.returnable();n=this._nextNewline,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n),this._row.push(e.substring(this._cursor,this._nextNewline)),this.saveRow(this._nextNewline+o),s=e.indexOf(this._delim,this._cursor);continue}if(s!==-1&&(s<this._nextNewline||this._nextNewline===-1))if(this._quoteSearch>s){const l=this.getNextUnqotedDelimiter(s,this._quoteSearch,this._nextNewline);if(l.nextDelim!==null&&l.quoteSearch!==null){s=l.nextDelim,this._quoteSearch=l.quoteSearch,n=s,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n),this._row.push(e.substring(this._cursor,s)),this._cursor=s+t,s=e.indexOf(this._delim,this._cursor);continue}}else{n=s,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n),this._row.push(e.substring(this._cursor,s)),this._cursor=s+t,s=e.indexOf(this._delim,this._cursor);continue}if(this._nextNewline!==-1){if(n=this._nextNewline-1,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n+1),this._row.push(e.substring(this._cursor,this._nextNewline)),this.saveRow(this._nextNewline+o),this._previewInRows&&this._data.length>=this._previewInRows)return this.returnable();continue}break}return n=e.length-1,this.addColumnIndexMapping(n),this.addFieldPosition(this._fieldStart,n+1),this.finish()}pushRow(e){this._data.push(e),this._lastCursor=this._cursor,this._outColumnIndexToCsvColumnIndexMapping&&(this._outColumnIndexToCsvColumnIndexMapping.push(this._currSingleRowColumnIndexToCsvColumnIndexMapping),this._currSingleRowColumnIndexToCsvColumnIndexMapping=[]),this._currentRowStartIndex=this._cursor,this._retainQuoteInformation&&(this._cellIsQuotedInfo.push(this._cellIsQuotedInfoRow),this._cellIsQuotedInfoRow=[]),this._firstQuoteInformationRowFound===!1&&(this._row.length===1&&(this._row[0]===""||this._rowInsertCommentLines_commentsString&&this._row[0].startsWith(this._rowInsertCommentLines_commentsString))?(this._firstQuoteInformationRowFound=!1,this._columnIsQuoted=[]):this._firstQuoteInformationRowFound=!0),this._outFieldPositionMapping&&(this._outFieldPositionMapping.push(this._currentRowFieldPositions),this._currentRowFieldPositions=[])}addColumnIndexMapping(e){this._outColumnIndexToCsvColumnIndexMapping&&this._currSingleRowColumnIndexToCsvColumnIndexMapping.push(e-this._currentRowStartIndex)}finish(e){return typeof e>"u"&&(e=this._input.substr(this._cursor)),this._row.push(e),this._cursor=this._inputLen,this.pushRow(this._row),this.returnable()}saveRow(e){this._cursor=e,this.pushRow(this._row),this._row=[],this._nextNewline=this._input.indexOf(this._newlineString,this._cursor)}returnable(){const e={data:this._data,errors:this._errors,meta:{delimiter:this._delim,linebreak:this._newlineString,cursor:this._lastCursor,columnIsQuoted:this._columnIsQuoted,cellIsQuotedInfo:this._cellIsQuotedInfo,outColumnIndexToCsvColumnIndexMapping:this._outColumnIndexToCsvColumnIndexMapping,outLineIndexToCsvLineIndexMapping:null,outCsvFieldToInputPositionMapping:this._outFieldPositionMapping}};return this._outColumnIndexToCsvColumnIndexMapping&&(e.meta.outColumnIndexToCsvColumnIndexMapping=this._outColumnIndexToCsvColumnIndexMapping),e}getNextUnqotedDelimiter(e,i,t){let o={nextDelim:null,quoteSearch:null},r=this._input.indexOf(this._quoteChar,i+1);if(e>i&&e<r&&(r<t||t===-1)){const s=this._input.indexOf(this._delim,r);if(s===-1)return o;s>r&&(r=this._input.indexOf(this._quoteChar,r+1)),o=this.getNextUnqotedDelimiter(s,r,t)}else o={nextDelim:e,quoteSearch:i};return o}extraSpaces(e){let i=0;if(e!==-1){const t=this._input.substring(this._quoteSearch+1,e);t&&t.trim()===""&&(i=t.length)}return i}addFieldPosition(e,i){this._currentRowFieldPositions.push({start:e,end:i})}}class E{constructor(e){this._data=[],this._quotes=e.quotes,this._delimiter=e.delimiter,this._newlineChar=e.newline,this._quoteChar=e.quoteChar,this._skipEmptyLines=e.skipEmptyLines==="greedy"||e.skipEmptyLines,this._isGreedySkipEmptyLines=e.skipEmptyLines==="greedy",this._quoteLeadingSpace=e.quoteLeadingSpace,this._quoteTrailingSpace=e.quoteTrailingSpace,this._determineFieldHasQuotesFunc=e.determineFieldHasQuotesFunc,this._rowInsertCommentLines_commentsString=e.rowInsertCommentLines_commentsString,this._quoteEmptyOrNullFields=e.quoteEmptyOrNullFields,this._quoteCharRegex=new RegExp(S(this._quoteChar),"g"),this._escapedQuote=e.escapeChar?e.escapeChar+this._quoteChar:this._quoteChar+this._quoteChar,this._outFieldPositionMapping=e.calcCsvFieldToInputPositionMapping?[]:null,c.BAD_DELIMITERS.some(i=>e.delimiter.indexOf(i)!==-1)&&(this._delimiter=c.DefaultDelimiter)}unparse(e){this._data=e;let i="";for(let t=0;t<this._data.length;t++){const o=this._data[t].length;let r=!1;const s=this._data[t].length===0,h=[];let n=0;if(this._skipEmptyLines&&(r=I._testEmptyLine(this._data[t],this._isGreedySkipEmptyLines)),!r){if(this._data[t].length>0&&this._rowInsertCommentLines_commentsString){const l=this._data[t][0];if(typeof l=="string"&&l.startsWith(this._rowInsertCommentLines_commentsString)){n=i.length,i+=l,this._outFieldPositionMapping&&(h.push({start:n,end:i.length}),this._outFieldPositionMapping.push(h)),i+=this._newlineChar;continue}}for(let l=0;l<o;l++){l>0&&!s&&(i+=this._delimiter),n=i.length;const a=l;i+=this.safe(this._data[t][a],t,l),h.push({start:n,end:i.length})}this._outFieldPositionMapping&&(this._skipEmptyLines&&o===0||this._outFieldPositionMapping.push(h)),t<this._data.length-1&&(!this._skipEmptyLines||o>0&&!s)&&(i+=this._newlineChar)}}return{csv:i,meta:{outCsvFieldToInputPositionMapping:this._outFieldPositionMapping}}}safe(e,i,t){if(e===""||e===null||e===void 0)return this._quoteEmptyOrNullFields?this._quoteChar+""+this._quoteChar:"";e=e.toString();const o=e.indexOf(this._quoteChar)>-1;e=e.replace(this._quoteCharRegex,this._escapedQuote);let r=!1;this._determineFieldHasQuotesFunc&&(r=this._determineFieldHasQuotesFunc(e,i,t),r==null&&(r=!1));const s=Array.isArray(this._quotes);return!s&&this._quotes||s&&this._quotes[t]||r||this._hasAny(e,c.NEED_QUOTES_CHARS)||o||e.indexOf(this._delimiter)>-1||this._quoteLeadingSpace&&e.charAt(0)===" "||this._quoteTrailingSpace&&e.charAt(e.length-1)===" "?this._quoteChar+e+this._quoteChar:e}_hasAny(e,i){for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return!0;return!1}}f.Papa=c,f.Parser=R,f.__parseConfigUserDefaults=x,f.__unparseConfigUserDefaults=F,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
